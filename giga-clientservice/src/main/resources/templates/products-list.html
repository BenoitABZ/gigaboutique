<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Products</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
<link rel="icon" type="image/png" th:href="@{/images/icons/favicon.png}" />
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/vendor/bootstrap/css/bootstrap.min.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/fonts/font-awesome-4.7.0/css/font-awesome.min.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/fonts/iconic/css/material-design-iconic-font.min.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/fonts/linearicons-v1.0.0/icon-font.min.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" th:href="@{/vendor/animate/animate.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/vendor/css-hamburgers/hamburgers.min.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/vendor/animsition/css/animsition.min.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/vendor/select2/select2.min.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/vendor/daterangepicker/daterangepicker.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" th:href="@{/vendor/slick/slick.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/vendor/MagnificPopup/magnific-popup.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	th:href="@{/vendor/perfect-scrollbar/perfect-scrollbar.css}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" th:href="@{/css/util.css}">
<link rel="stylesheet" type="text/css" th:href="@{/css/main.css}">
<!--===============================================================================================-->
</head>
<body class="animsition">

	<!-- Header -->
	<header>
		<!-- Header desktop -->
		<div class="container-menu-desktop">
			<!-- Topbar -->
			<div class="top-bar">
				<div class="content-topbar flex-sb-m h-full container">

					<div class="right-top-bar flex-w h-full">

						<a th:href="@{/logout}" class="flex-c-m trans-04 p-lr-25"> Deconnexion </a>
					
					</div>
				</div>
			</div>

			<div class="wrap-menu-desktop">
				<nav class="limiter-menu-desktop container">

					<!-- Logo desktop -->
					<a href="#" class="logo"> 
					    <img th:src="@{/images/icons/logo-01.png}"
						alt="IMG-LOGO">
					</a>

					<!-- Menu desktop -->
			      <div class="menu-desktop">
						<ul class="main-menu">
							<li class="active-menu"><a th:href="@{/}">Home</a></li>

							<li class="label1" data-label1="New"><a th:href="@{/getproduits}">Shopping</a>
							</li>

							<li><a href= "#" >Contact</a></li>
						</ul>
					</div>

					<!-- Icon header -->
					<div class="wrap-icon-header flex-w flex-r-m">
						<a  
						    id = "heart"
						    th:href="@{/getproduitspanier}"
							class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
							th:attr="data-notify=${numberOfItems}"> <i class="zmdi zmdi-favorite-outline"></i>
						</a>
					</div>
				</nav>
			</div>
		</div>
	</header>

	<div class="flex-w flex-sb-m p-b-52"></div>

<form name='f' th:action="@{/getproduitscriteria}" th:object="${critereDto}" method='POST'>
	<div class="p-t-33">
		<div class="flex-w flex-r-m p-b-10">
			<div class="size-203 flex-c-m respon6">Genre</div>

			<div class="size-204 respon6-next form-group">
				<div class="rs1-select2 bor8 bg0">
					<select class="js-select2 select2-hidden-accessible form-control" name="genre"
						tabindex="-1" aria-hidden="true">
						<option th:if="${critereDto.genre != null}" 
						        th:value="${critereDto.genre}"
						        th:text="${critereDto.genre}"></option>
						<option value="">Tous les genres</option>
                        <option th:each="genre : ${genres}"
                                th:value="${genre}"
                                th:text="${genre}">
                         </option>
					</select>
					<div class="dropDownSelect2"></div>
				</div>
			</div>
		</div>

		<div class="flex-w flex-r-m p-b-10">
			<div class="size-203 flex-c-m respon6">Catégories</div>

			<div class="size-204 respon6-next form-group">
				<div class="rs1-select2 bor8 bg0">
					<select class="js-select2 select2-hidden-accessible form-control" name="categorie"
						tabindex="-1" aria-hidden="true">
						 <option th:if="${critereDto.categorie != null}" 
						         th:value="${critereDto.categorie}"
						         th:text="${critereDto.categorie}"></option>
						 <option value="" >Toutes les catégories</option>
						 <option th:each="categorie : ${categories}"
						         th:value="${categorie}"
                                 th:text="${categorie}">
                         </option>
					</select>
					<div class="dropDownSelect2"></div>
				</div>
			</div>
		</div>

		<div class="flex-w flex-r-m p-b-10">
			<div class="size-203 flex-c-m respon6">Marques</div>

			<div class="size-204 respon6-next form-group">
				<div class="rs1-select2 bor8 bg0">
					<select class="js-select2 select2-hidden-accessible form-control" name="marque"
						tabindex="-1" aria-hidden="true">
						<option th:if="${critereDto.marque != null}" 
						        th:value="${critereDto.marque}"
						        th:text="${critereDto.marque}"></option>
						<option value ="">Toutes les marques</option>
					    <option th:each="marque : ${marques}"
					            th:value="${marque}"                             
                                th:text="${marque}">
                         </option>
					</select>
					<div class="dropDownSelect2"></div>
				</div>
			</div>
		</div>

		<div class="flex-w flex-r-m p-b-10">
			<div class="size-204 flex-w flex-m respon6-next">
				<button 
				    type = "submit"
					class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-addcart-detail">
					FILTRER
			    </button>
			</div>
		</div>
	</div>
</form>
    
	<!-- Product -->
	<div class="bg0 m-t-23 p-b-140">
		<div class="container">
			<div class="row isotope-grid" style="position: relative; height: 2269.15px;">
			   <h1 th:if="${produitsDto == null}" style="size:60px"> Ooops....Aucun produit ne correspond à vos critères</h1>
				<div th:each="produit : ${produitsDto}" class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item women" style="position: absolute; left: 0%; top: 0px;">
					<!-- Block2 -->
					<div class="block2">
						<div class="block2-pic hov-img0">
							<img th:src="${produit.images[0]}" alt="IMG-PRODUCT"> 
							  <a
								 th:href="@{|/getproduit/${produit.idProduit}|}"
								 class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
								 VOIR! 
							  </a>
						</div>

						<div class="block2-txt flex-w flex-t p-t-14">
							<div class="block2-txt-child1 flex-col-l ">
								<a th:href="@{|/getproduit/${produit.idProduit}|}"
								   class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6"
								   th:text ="${produit.nom}">
								</a> 
								<span class="stext-105 cl3"
								th:text ="|${produit.newPrix}€|">
								</span>
								<span 
								style="color : red; font-size : 17px"
								th:text ="| - ${produit.promotion}%|">
								</span>
							</div>

						   <!--  -->
						   <div class="block2-txt-child2 flex-r p-t-3">
								<a href="#"
								    th:if="${produit.isHeart()}"
								    th:id="${produit.idProduit}"
									class="btn-addwish-b2 dis-block pos-relative js-addedwish-b2">
									<img 
									class="icon-heart1 dis-block trans-04"
									th:src="@{|/images/icons/icon-heart-01.png|}" alt="ICON"> 
									<img
									class="icon-heart2 dis-block trans-04 ab-t-l"
									th:src="@{|/images/icons/icon-heart-02.png|}" alt="ICON">
								</a>
								<a href="#"
								    th:unless="${produit.isHeart()}"
								    th:id="${produit.idProduit}"
									class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
									<img 
									class="icon-heart1 dis-block trans-04"
									th:src="@{|/images/icons/icon-heart-01.png|}" alt="ICON"> 
									<img
									class="icon-heart2 dis-block trans-04 ab-t-l"
									th:src="@{|/images/icons/icon-heart-02.png|}" alt="ICON">
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="flex-c-m flex-w w-full p-t-45 ">
		  <ul class="pager">
		      <li><a th:if="${more}" class="flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04" th:href="@{/getpaginatedproduits(pagination='next')}">Next</a></li>
              <li><a th:if="${less}" class="flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04" th:href="@{/getpaginatedproduits(pagination='previous')}">Previous</a></li>
          </ul>
        </div>
	</div>

	<!-- Footer -->
	<footer class="bg3 p-t-75 p-b-32">
		<div class="container">
			<div class="row">
				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">Categories</h4>

					<ul>
						<li class="p-b-10"><a href="#"
							class="stext-107 cl7 hov-cl1 trans-04"> Femme </a></li>

						<li class="p-b-10"><a href="#"
							class="stext-107 cl7 hov-cl1 trans-04"> Homme </a></li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">Besoin d'aide ?</h4>

					<ul>
						<li class="p-b-10"><a href="#"
							class="stext-107 cl7 hov-cl1 trans-04"> Comment ça marche ? </a>
						</li>

						<li class="p-b-10"><a href="#"
							class="stext-107 cl7 hov-cl1 trans-04"> Qui sommes-nous ? </a></li>

						<li class="p-b-10"><a href="#"
							class="stext-107 cl7 hov-cl1 trans-04"> FAQ </a></li>
					</ul>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">GET IN TOUCH</h4>

					<p class="stext-107 cl7 size-201">Des questions ? Rejoignez
						nous sur les réseaux sociaux !</p>

					<div class="p-t-27">
						<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16"> <i
							class="fa fa-facebook"></i>
						</a> <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16"> <i
							class="fa fa-instagram"></i>
						</a> <a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16"> <i
							class="fa fa-pinterest-p"></i>
						</a>
					</div>
				</div>

				<div class="col-sm-6 col-lg-3 p-b-50">
					<h4 class="stext-301 cl0 p-b-30">Newsletter</h4>

					<form>
						<div class="wrap-input1 w-full p-b-4">
							<input class="input1 bg-none plh1 stext-107 cl7" type="text"
								name="email" placeholder="email@example.com">
							<div class="focus-input1 trans-04"></div>
						</div>

						<div class="p-t-18">
							<button
								class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">
								INSCRIPTION</button>
						</div>
					</form>
				</div>
			</div>

			<p class="stext-107 cl6 txt-center">
				<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
				Copyright &copy;
				<script>
					document.write(new Date().getFullYear());
				</script>
				All rights reserved | Latest OpenClassrooms project
				<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->

			</p>
		</div>
	</footer>


	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top"> <i
			class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

	<!--===============================================================================================-->
	<script th:src="@{/vendor/jquery/jquery-3.2.1.min.js}"></script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/animsition/js/animsition.min.js}"></script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/bootstrap/js/popper.js}"></script>
	<script th:src="@{/vendor/bootstrap/js/bootstrap.min.js}"></script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/select2/select2.min.js}"></script>
	<script>
		$(".js-select2").each(function() {
			$(this).select2({
				minimumResultsForSearch : 20,
				dropdownParent : $(this).next('.dropDownSelect2')
			});
		})
	</script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/daterangepicker/moment.min.js}"></script>
	<script th:src="@{/vendor/daterangepicker/daterangepicker.js}"></script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/slick/slick.min.js}"></script>
	<script th:src="@{/js/slick-custom.js}"></script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/parallax100/parallax100.js}"></script>
	<script>
		$('.parallax100').parallax100();
	</script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/MagnificPopup/jquery.magnific-popup.min.js}"></script>
	<script>
		$('.gallery-lb').each(function() { // the containers for all your galleries
			$(this).magnificPopup({
				delegate : 'a', // the selector for gallery item
				type : 'image',
				gallery : {
					enabled : true
				},
				mainClass : 'mfp-fade'
			});
		});
	</script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/isotope/isotope.pkgd.min.js}"></script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/sweetalert/sweetalert.min.js}"></script>
	<script>
		$('.js-addwish-b2').on('click', function(e) {
			e.preventDefault();
		});

		$('.js-addwish-b2').each(
				function() {
					var nameProduct = $(this).parent().parent().find(
							'.js-name-b2').html();
					$(this).on('click', function() {
						
						var id = $(this).attr('id');
						var notify = $('#heart').attr('data-notify');
						
						$.ajax
					    ({ 
					        url: 'http://localhost:8007/addproduitpanier',
					        data: "id="+id,
					        type: 'GET',
					        success: function()
					        {
						
						
						swal(nameProduct, "est ajouté à la wishlist!", "success");
											
						var notifynum = parseInt(notify);
						notifynum++;
						var newnotify = notifynum.toString();
						
						$('#heart').attr('data-notify', newnotify);
											
						
					        }
					    });
						
						$(this).removeClass('js-addwish-b2');
						$(this).addClass('js-addedwish-b2');
						$(this).off('click')
										
					});
				});
		
	</script>
	<!--===============================================================================================-->
	<script th:src="@{/vendor/perfect-scrollbar/perfect-scrollbar.min.js}"></script>
	<script>
		$('.js-pscroll').each(function() {
			$(this).css('position', 'relative');
			$(this).css('overflow', 'hidden');
			var ps = new PerfectScrollbar(this, {
				wheelSpeed : 1,
				scrollingThreshold : 1000,
				wheelPropagation : false,
			});

			$(window).on('resize', function() {
				ps.update();
			})
		});
	</script>
	<!--===============================================================================================-->
	<script th:src="@{/js/main.js}"></script>

</body>
</html>